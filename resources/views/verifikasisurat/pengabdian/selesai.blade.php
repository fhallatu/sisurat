@extends('layouts.master')

@section('content')
<div class="main-content">
    <section class="section">
        <div class="section-header">
            <h1> Data Surat Pengabdian Selesai </h1>
        </div>
    </section>
    <div class="card">
        <div class="card-body">
            <table class="table table-hover table-responsive">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Skema</th>
                        <th scope="col">Judul</th>
                        <th scope="col">Jenis Surat</th>
                        <th scope="col">Jenis Surat Tugas</th>
                        <th scope="col">Nama Ketua</th>
                        <th scope="col">Status</th>
                        <th scope="col">File Surat Pengabdian</th>
                        <th scope="col">Aksi</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        @foreach ($suratpengabdian as $item)
                        <td>{{$loop->iteration}}</td>
                        <td>{{$item->pengabdian['skema_pengabdian']}}</td>
                        <td>{{$item->pengabdian['judul_pengabdian']}}</td>
                        <td>{{$item->jenis_suratpengabdian}}</td>
                        <td>{{$item->jenis_surattugas}}</td>
                        <td>{{$item->pengabdian->user['nama_user']}}</td>
                        <td>
                            @if($item->status=="upload file")
                            <span class="badge badge-info">{{$item->status}}</span>
                            @elseif($item->status=="dalam antrean")
                            <span class="badge badge-danger">{{$item->status}}</span>
                            @elseif($item->status=="sedang diproses")
                            <span class="badge badge-warning">{{$item->status}}</span>
                            @elseif($item->status=="selesai")
                            <span class="badge badge-success">{{$item->status}}</span>
                            @endif
                        </td>
                        @if($item->file_suratpengabdian != null)
                        <td class="text-center">
                            <a href="{{ asset('file_suratpengabdian/'. $item->file_suratpengabdian) }}"
                                download='{{ $item->file_suratpengabdian }}' class="download" data-toggle="tooltip"
                                data-placement="top" title="" data-original-title="Unduh">
                                <svg id="Capa_1" enable-background="new 0 0 512 512" height="25" viewBox="0 0 512 512"
                                    width="25" xmlns="http://www.w3.org/2000/svg">
                                    <g>
                                        <path
                                            d="m82.581 330.323h-16.517c-22.804 0-41.29-18.486-41.29-41.29 0-13.682 11.092-24.774 24.774-24.774h33.032v66.064z"
                                            fill="#bd4150" />
                                        <path
                                            d="m396.387 0h-305.548l-8.506 16.516v487.484h388.377l16.516-8.516v-404.645z"
                                            fill="#eceaec" />
                                        <path
                                            d="m90.839 470.71v-470.71c-9.121 0-16.516 7.394-16.516 16.516v478.968c0 9.122 7.395 16.516 16.516 16.516h379.871c9.121 0 16.516-7.395 16.516-16.516h-371.613c-13.683 0-24.774-11.092-24.774-24.774z"
                                            fill="#dad8db" />
                                        <path
                                            d="m487.226 89.421c0-4.38-1.74-8.581-4.838-11.679l-72.908-72.905c-3.097-3.097-7.298-4.837-11.678-4.837h-1.415v82.581c0 4.56 3.697 8.258 8.258 8.258h82.581z"
                                            fill="#dad8db" />
                                        <path
                                            d="m305.548 313.807h-256c-2.896 0-5.677-.497-8.261-1.411l-7.954 13.271v104.333c0 13.683 11.092 24.774 24.774 24.774h247.441l16.516-8.839v-115.612c0-9.122-7.394-16.516-16.516-16.516z"
                                            fill="#e15f78" />
                                        <path
                                            d="m41.29 312.396c-9.6-3.413-16.516-12.592-16.516-23.364v148.645c0 13.682 11.092 24.774 24.774 24.774h256c9.121 0 16.516-7.395 16.516-16.516h-256c-13.682 0-24.774-11.092-24.774-24.774z"
                                            fill="#db4655" />
                                        <g fill="#fff">
                                            <path
                                                d="m260.452 379.25h-16.21v-15.653h18.323c4.565 0 8.258-3.698 8.258-8.258s-3.694-8.258-8.258-8.258h-26.581c-4.565 0-8.258 3.698-8.258 8.258v65.581c0 4.56 3.694 8.258 8.258 8.258s8.258-3.698 8.258-8.258v-25.153h16.21c4.565 0 8.258-3.698 8.258-8.258s-3.694-8.259-8.258-8.259z" />
                                            <path
                                                d="m108.992 346.839h-18.395c-2.194 0-4.298.875-5.847 2.427-1.541 1.549-2.406 3.647-2.406 5.831h-.006v66.065c0 4.56 3.694 8.258 8.258 8.258s8.258-3.698 8.258-8.258v-20.482c3.705-.02 7.778-.038 10.137-.038 15.032 0 27.266-12.069 27.266-26.899.001-14.836-12.233-26.904-27.265-26.904zm0 37.286c-2.339 0-6.371.016-10.056.036-.016-3.81-.056-20.806-.056-20.806h10.113c5.831 0 10.75 4.758 10.75 10.387s-4.92 10.383-10.751 10.383z" />
                                            <path
                                                d="m178.242 347.815h-18.153c-2.194 0-4.298.871-5.847 2.423-1.548 1.552-2.419 3.657-2.411 5.851l.048 31.968c0 8.915.081 32.157.081 32.157.008 2.19.887 4.29 2.444 5.835 1.54 1.532 3.637 2.395 5.815 2.395h.032s13.46-.052 18.669-.141c19.395-.343 33.476-17.238 33.476-40.173-.001-24.114-13.727-40.315-34.154-40.315zm.387 63.971c-2.363.04-6.452.077-10.177.097-.024-7.56-.056-18.375-.056-23.827l-.032-23.726h9.879c16.79 0 17.637 19.823 17.637 23.798-.001 11.626-5.332 23.449-17.251 23.658z" />
                                        </g>
                                        <path
                                            d="m197.935 279.363c-6.371 0-12.129-3.315-16.177-9.569-6.016-9.282-4.435-19.794 4.331-28.843 8.839-9.129 26.927-17.718 48.694-24.73 6.79-12.798 13.702-27.778 20.161-44.339 3.815-9.786 6.895-18.609 9.363-26.5-10.879-19.944-17.347-38.512-15.629-50.569 1.75-12.234 10.887-19.121 24.468-18.371 4.032.218 13.653 2.323 15.976 17.137 1.774 11.327-1.21 29.637-7.194 50.444 11.323 19.101 26.847 39.56 42.032 55.262 22.952-1.399 42.403.274 52.185 6.177 7.661 4.621 10.669 12.157 8.048 20.153-4.29 13.069-14.653 19.056-27.75 16.004-11.024-2.573-24.685-12.198-38.54-25.56-22.282 1.96-48.508 6.496-71.516 13.262-13.734 24.649-28.581 43.839-41.048 48.605-2.516.965-5 1.437-7.404 1.437zm-2.322-18.544c1.379 2.121 2.137 2.077 2.492 2.036 5.258-.536 14.016-9.613 24.016-24.956-6.613 2.835-12.54 5.907-17.524 9.206-12.5 8.278-9.847 12.367-8.984 13.714zm145.484-45.851c7.056 5.516 13.613 9.286 19.097 10.569 4.282.996 6.484.488 8.306-5.065-2.435-3.694-12.798-5.468-27.403-5.504zm-65.589-50.92c-5.379 15.315-11.96 31.173-19.145 46.036 15.476-3.887 31.79-6.948 47.371-8.891-10.073-11.415-19.807-24.237-28.226-37.145zm-3.976-71.427c-5.863 0-6.169 2.198-6.508 4.52-.863 6.101 1.282 14.778 5.516 24.782 3.734-17.827 2.976-27.258 1.161-29.302-.056 0-.112 0-.169 0z"
                                            fill="#e15f78" />
                                    </g>
                                </svg>
                            </a>
                        </td>
                        @else
                        <td class="text-center">
                            <svg id="Capa_1" enable-background="new 0 0 512 512" height="25" viewBox="0 0 512 512"
                                width="25" xmlns="http://www.w3.org/2000/svg">
                                <g>
                                    <g>
                                        <g>
                                            <g>
                                                <g>
                                                    <path
                                                        d="m496.35 369.14v59.15c0 7.03-5.69 12.72-12.72 12.72h-455.26c-7.03 0-12.72-5.69-12.72-12.72v-59.15c0-1.35.21-2.69.64-3.97l64.41-195.65c1.71-5.22 6.58-8.74 12.08-8.74h326.44c5.5 0 10.37 3.52 12.08 8.74l64.41 195.65c.43 1.28.64 2.62.64 3.97z"
                                                        fill="#9e9797" />
                                                    <path
                                                        d="m496.35 369.14v59.15c0 7.03-5.69 12.72-12.72 12.72h-76.48c-.26-90.17 1.13-238.99 1.54-280.23h10.53c5.5 0 10.37 3.52 12.08 8.74l64.41 195.65c.43 1.28.64 2.62.64 3.97z"
                                                        fill="#b9acac" />
                                                    <path
                                                        d="m15.648 369.14v59.15c0 7.03 5.69 12.72 12.72 12.72h76.48c.26-90.17-1.13-238.99-1.54-280.23h-10.53c-5.5 0-10.37 3.52-12.08 8.74l-64.41 195.65c-.43 1.28-.64 2.62-.64 3.97z"
                                                        fill="#b9acac" />
                                                    <path
                                                        d="m448.023 365.166-39.221-119.136c-1.717-5.216-6.588-8.741-12.08-8.741h-281.444c-5.491 0-10.363 3.525-12.08 8.741l-39.221 119.136c-.423 1.283-.638 2.626-.638 3.977v59.151c0 7.024 5.694 12.718 12.718 12.718h359.887c7.024 0 12.718-5.694 12.718-12.718v-59.151c-.001-1.352-.216-2.694-.639-3.977z"
                                                        fill="#756f6f" />
                                                    <ellipse cx="256" cy="316.578" fill="#5b5555" rx="92.973"
                                                        ry="26.139" />
                                                    <path
                                                        d="m448.661 369.145v59.15c0 7.02-5.698 12.718-12.718 12.718h-44.245c7.02 0 12.718-5.698 12.718-12.718v-59.15c0-1.348-.216-2.696-.636-3.981l-39.222-119.14c-1.717-5.214-6.588-8.737-12.082-8.737h44.245c5.494 0 10.365 3.523 12.082 8.737l39.222 119.14c.42 1.285.636 2.633.636 3.981z"
                                                        fill="#5b5555" />
                                                    <path
                                                        d="m496.353 381.418v110.365c0 7.024-5.694 12.718-12.718 12.718h-455.27c-7.024 0-12.718-5.694-12.718-12.718v-110.365c0-7.024 5.694-12.718 12.718-12.718h93.902c4.86 0 9.295 2.77 11.428 7.137l18.452 37.781c2.133 4.367 6.568 7.137 11.428 7.137h184.852c4.86 0 9.295-2.77 11.428-7.137l18.452-37.781c2.133-4.367 6.568-7.137 11.428-7.137h93.902c7.022 0 12.716 5.694 12.716 12.718z"
                                                        fill="#31a7fb" />
                                                    <path
                                                        d="m496.353 381.418v110.365c0 7.02-5.698 12.718-12.718 12.718h-48.427c7.02 0 12.718-5.698 12.718-12.718v-110.365c0-7.02-5.698-12.718-12.718-12.718h48.427c7.02 0 12.718 5.698 12.718 12.718z"
                                                        fill="#1c96f9" />
                                                </g>
                                                <g>
                                                    <circle cx="256" cy="232.738" fill="#a3e440" r="87.024" />
                                                    <path
                                                        d="m343.023 232.736c0 48.064-38.964 87.028-87.017 87.028-5.842 0-11.552-.574-17.074-1.679 39.881-7.941 69.932-43.139 69.932-85.35s-30.051-77.398-69.932-85.339c5.522-1.104 11.232-1.679 17.074-1.679 48.053.002 87.017 38.955 87.017 87.019z"
                                                        fill="#99d53b" />
                                                </g>
                                                <g>
                                                    <g>
                                                        <path
                                                            d="m108.113 79.515c0-14.771 11.974-26.745 26.745-26.745s26.745 11.974 26.745 26.745-11.974 26.745-26.745 26.745c-14.77 0-26.745-11.974-26.745-26.745"
                                                            fill="#bcea73" />
                                                        <path
                                                            d="m121.293 102.563c10.499-2.42 18.321-11.819 18.321-23.051 0-11.22-7.81-20.631-18.309-23.051 3.972-2.347 8.604-3.691 13.554-3.691 14.764 0 26.742 11.978 26.742 26.742 0 14.776-11.978 26.754-26.742 26.754-4.949 0-9.593-1.345-13.566-3.703"
                                                            fill="#99d53b" />
                                                    </g>
                                                </g>
                                            </g>
                                        </g>
                                        <g>
                                            <circle cx="324.46" cy="38.247" fill="#a8e7ef" r="21.244" />
                                            <path
                                                d="m345.703 38.244c0 11.737-9.514 21.251-21.242 21.251-3.932 0-7.621-1.068-10.776-2.942 8.339-1.922 14.553-9.388 14.553-18.31 0-8.912-6.204-16.388-14.543-18.31 3.155-1.864 6.835-2.932 10.766-2.932 11.728.001 21.242 9.516 21.242 21.243z"
                                                fill="#70d9e6" />
                                        </g>
                                    </g>
                                    <g>
                                        <path
                                            d="m502.839 362.82-34.35-104.336c-1.295-3.934-5.536-6.074-9.469-4.779-3.935 1.295-6.074 5.535-4.779 9.469l32.351 98.267c-.968-.143-1.951-.241-2.958-.241h-29.021l-38.312-116.375v-76.548h2.923c2.258 0 4.25 1.441 4.956 3.586l18.486 56.153c1.039 3.156 3.972 5.157 7.123 5.157.777 0 1.568-.122 2.347-.378 3.935-1.295 6.074-5.535 4.779-9.469l-18.486-56.153c-2.737-8.311-10.454-13.895-19.204-13.895h-112.086c-14.751-9.527-32.31-15.063-51.139-15.063s-36.388 5.536-51.139 15.063h-112.086c-8.75 0-16.467 5.584-19.204 13.896l-64.41 195.647c-.673 2.043-1.014 4.17-1.014 6.321v53.424c0 4.142 3.358 7.5 7.5 7.5s7.5-3.358 7.5-7.5v-41.148c0-2.877 2.341-5.218 5.218-5.218h93.901c1.979 0 3.82 1.149 4.688 2.928l18.452 37.781c3.366 6.892 10.497 11.345 18.167 11.345h184.853c7.67 0 14.801-4.454 18.167-11.345l18.452-37.781c.869-1.778 2.709-2.928 4.688-2.928h93.901c2.877 0 5.218 2.341 5.218 5.218v110.364c0 2.877-2.341 5.218-5.218 5.218h-455.269c-2.877 0-5.218-2.341-5.218-5.218v-32.189c0-4.142-3.358-7.5-7.5-7.5s-7.5 3.358-7.5 7.5v32.189c0 11.148 9.07 20.218 20.218 20.218h455.27c11.148 0 20.218-9.07 20.218-20.218v-122.64c0-2.15-.341-4.277-1.014-6.322zm-101.537-132.503c-1.479-.342-3.012-.529-4.58-.529h-46.249c-.731-23.73-10.251-45.283-25.408-61.511h76.237zm-239.775-.528h-46.249c-1.568 0-3.101.186-4.58.529v-62.04h76.237c-15.156 16.228-24.677 37.781-25.408 61.511zm-136.12 131.653 62.412-189.578c.706-2.145 2.698-3.586 4.956-3.586h2.923v76.549l-38.312 116.373h-29.021c-1.007 0-1.989.099-2.958.242zm346.159 11.103-18.453 37.782c-.868 1.778-2.708 2.927-4.688 2.927h-184.851c-1.979 0-3.819-1.149-4.688-2.928l-18.452-37.781c-3.366-6.892-10.497-11.345-18.167-11.345h-49.088l37.144-112.825c.706-2.145 2.698-3.586 4.956-3.586h46.975c2.238 17.327 9.259 33.851 20.323 47.479 13.407 16.515 32.165 28.14 52.818 32.734 4.043.896 8.051-1.649 8.95-5.693.899-4.043-1.649-8.05-5.693-8.95-17.366-3.863-33.145-13.646-44.429-27.546-11.443-14.096-17.746-31.88-17.746-50.075 0-43.85 35.674-79.524 79.523-79.524s79.523 35.674 79.523 79.524c0 37.38-26.505 70.103-63.022 77.806-4.053.855-6.646 4.833-5.791 8.886.745 3.531 3.86 5.954 7.331 5.954.513 0 1.034-.053 1.555-.163 20.892-4.407 39.896-15.973 53.512-32.567 11.249-13.709 18.378-30.371 20.636-47.865h46.976c2.258 0 4.25 1.441 4.956 3.586l37.146 112.825h-49.089c-7.669 0-14.8 4.453-18.167 11.345z" />
                                        <path
                                            d="m53.912 477.393h27.446c4.142 0 7.5-3.358 7.5-7.5s-3.358-7.5-7.5-7.5h-27.446c-4.142 0-7.5 3.358-7.5 7.5s3.358 7.5 7.5 7.5z" />
                                        <path
                                            d="m53.912 453.964h27.446c4.142 0 7.5-3.358 7.5-7.5s-3.358-7.5-7.5-7.5h-27.446c-4.142 0-7.5 3.358-7.5 7.5s3.358 7.5 7.5 7.5z" />
                                        <path
                                            d="m273.294 266.144c2.119 0 4.225-.893 5.708-2.631 2.689-3.15 2.315-7.885-.835-10.574-6.184-5.278-14.396-8.199-23.125-8.226-8.714-.019-16.958 2.846-23.173 8.088-3.167 2.67-3.569 7.402-.898 10.568 2.67 3.167 7.402 3.57 10.568.898 3.435-2.896 8.311-4.555 13.388-4.555h.07c5.104.016 9.999 1.705 13.432 4.635 1.412 1.207 3.143 1.797 4.865 1.797z" />
                                        <path
                                            d="m214.689 216.564h-.089c-4.143.026-7.474 3.317-7.496 7.459-.023 4.142 3.361 7.518 7.503 7.541h.042c4.123 0 7.477-3.331 7.499-7.459.022-4.142-3.317-7.518-7.459-7.541z" />
                                        <path
                                            d="m296.665 231.523c.056.006.114.005.17.01.184.015.367.03.555.031h.042.01c.006 0 .011-.001.017-.001.249-.001.495-.013.738-.037 3.788-.379 6.745-3.575 6.745-7.462 0-4.069-3.243-7.374-7.284-7.489-.062-.002-.123-.01-.186-.01h-.023c-.002 0-.005 0-.007 0h-.059-.032c-.003 0-.007 0-.01 0-4.122 0-7.432 3.331-7.455 7.459-.021 3.896 2.974 7.113 6.779 7.499z" />
                                        <path
                                            d="m188.294 35.535c1.464 1.465 3.384 2.197 5.303 2.197s3.839-.732 5.303-2.197l6.063-6.063 6.063 6.063c1.464 1.464 3.384 2.197 5.303 2.197s3.839-.732 5.303-2.197c2.929-2.929 2.929-7.678 0-10.606l-6.063-6.063 6.063-6.063c2.929-2.929 2.929-7.678 0-10.606-2.928-2.929-7.677-2.929-10.606 0l-6.063 6.063-6.063-6.063c-2.929-2.929-7.678-2.929-10.606 0-2.929 2.929-2.929 7.678 0 10.606l6.063 6.063-6.063 6.063c-2.929 2.929-2.929 7.678 0 10.606z" />
                                        <path
                                            d="m134.858 113.76c18.883 0 34.245-15.362 34.245-34.246 0-18.883-15.362-34.245-34.245-34.245s-34.245 15.362-34.245 34.245c0 18.884 15.363 34.246 34.245 34.246zm0-53.49c10.612 0 19.245 8.633 19.245 19.245s-8.633 19.246-19.245 19.246-19.245-8.633-19.245-19.246c0-10.612 8.634-19.245 19.245-19.245z" />
                                        <path
                                            d="m357.925 109.132c1.464 1.464 3.384 2.197 5.303 2.197s3.839-.732 5.303-2.197l6.063-6.063 6.063 6.063c1.464 1.464 3.384 2.197 5.303 2.197s3.839-.732 5.303-2.197c2.929-2.929 2.929-7.678 0-10.606l-6.063-6.063 6.063-6.063c2.929-2.929 2.929-7.678 0-10.606-2.929-2.929-7.678-2.929-10.606 0l-6.063 6.063-6.063-6.063c-2.929-2.929-7.678-2.929-10.606 0-2.929 2.929-2.929 7.678 0 10.606l6.063 6.063-6.063 6.063c-2.929 2.929-2.929 7.678 0 10.606z" />
                                        <path
                                            d="m255.588 107.999h.023c4.131 0 7.487-3.343 7.5-7.478l.066-22.333c.012-4.142-3.335-7.51-7.478-7.522-.008 0-.015 0-.023 0-4.131 0-7.487 3.343-7.5 7.478l-.066 22.333c-.012 4.141 3.336 7.509 7.478 7.522z" />
                                        <path
                                            d="m206.846 84.209c-3.553 2.128-4.708 6.734-2.58 10.288l11.604 19.374c1.406 2.347 3.891 3.647 6.441 3.647 1.311 0 2.64-.344 3.847-1.067 3.553-2.128 4.708-6.734 2.58-10.288l-11.604-19.374c-2.129-3.553-6.735-4.709-10.288-2.58z" />
                                        <path
                                            d="m284.967 116.734c1.216.738 2.559 1.089 3.884 1.089 2.535 0 5.008-1.285 6.419-3.609l11.72-19.31c2.149-3.541 1.021-8.154-2.52-10.303-3.542-2.148-8.154-1.021-10.303 2.52l-11.72 19.31c-2.149 3.541-1.02 8.154 2.52 10.303z" />
                                        <path
                                            d="m324.46 66.991c15.85 0 28.744-12.895 28.744-28.744s-12.894-28.744-28.744-28.744-28.744 12.895-28.744 28.744 12.894 28.744 28.744 28.744zm0-42.488c7.579 0 13.744 6.166 13.744 13.744s-6.166 13.744-13.744 13.744-13.744-6.166-13.744-13.744 6.165-13.744 13.744-13.744z" />
                                    </g>
                                </g>
                            </svg>
                        </td>
                        @endif
                        <td>
                            <div class='d-flex flex-row bd-highlight'>
                                @if((auth()->user()->hak_akses == 'admin') || (auth()->user()->hak_akses == 'staff'))
                                <a href='/sipesan/surat/pengabdian/{{ $item->id_srtpengabdian }}/edit'
                                    class="btn btn-sm btn-primary ml-1"><i class="fas fa-edit"></i></a>
                                @endif
                                <a href="#" srtpengabdian-id="{{ $item->id_srtpengabdian }}"
                                    srtpengabdian-jenis="{{ $item->jenis_suratpengabdian }}"
                                    class="deleteSrtPengabdian btn btn-sm btn-danger ml-1"><i
                                        class="far fa-trash-alt"></i></a>

                                <a href='/sipesan/surat/pengabdiann/{{$item->id_srtpengabdian}}/detail' class="btn btn-sm btn-info ml-1"><i
                                        class="fas fa-info"></i></a>

                                <a href='/sipesan/surat/pengabdian/{{ $item->id_srtpengabdian }}/cetak'
                                    class="btn btn-sm btn-primary ml-1"><i class="fas fa-print"></i></a>
                            </div>
                        </td>
                    </tr>
                    @endforeach

                </tbody>
            </table>
        </div>
    </div>
</div>



@endsection

@push('script')
<script>
    $('.deleteSrtPengabdian').click(function () {
        var srtpengabdianId = $(this).attr('srtpengabdian-id');
        swal({
            title: "Hapus Data Surat Pengabdian",
            text: "Apakah anda yakin ingin menghapus data surat pengabdian ini ? ",
            icon: "warning",
            buttons: ["Jangan Hapus", "Hapus"],
            dangerMode: true,
            closeOnClickOutside: false,
        }).then((willDelete) => {
            if (willDelete) {
                window.location = "/sipesan/surat/pengabdian/delete/" + srtpengabdianId + "";
            } else {
                swal(" Data surat pengabdian tidak jadi dihapus.");
            }
        });
    });

</script>
@endpush
